:doctype: book
:toc:
:toc-title: Table of Contents
:toc-placement: preamble

# PEPPER Backend Guide

[.center]
image::https://quarkus.io/assets/images/brand/quarkus_logo_vertical_450px_reverse.png[Quarkus Logo, link=https://quarkus.io/, align=center]


*Quarkus* is a modern, *Kubernetes-native* ğŸš€ Java framework designed to *optimize Java applications* for *cloud environments*, especially *containers* ğŸ³. It is built around familiar *Java libraries and standards* (like *JAX-RS, CDI,* and *Hibernate*), but with a strong focus on *fast startup times* âš¡, *low memory usage* ğŸ“‰, and *developer productivity* ğŸ§‘â€ğŸ’».


== Introduction

*Pepper in Elderly Care* is a cool project that helps make life better for *seniors in nursing homes*. ğŸ¡ğŸ‘µğŸ¤– Pepper the robot is the *star*, bringing *fun games* and *activities* to brighten their day! ğŸ‰ğŸ®ğŸ˜ŠğŸŒŸ It also *helps with food plans* so seniors can choose what they want to eat. ğŸ²ğŸ¥—ğŸ

== Prerequisites

*Language*: Java 17 or higher +
*Framwork*: Qurakus 3.14.4 or higher +
*IDE*: IntelliJ IDEA (recommended) +
*Build tool*: Apache Maven 3.13.0 or higher +
*Container runtime*: Docker +
*Operating system*: Windows, macOS, or Linux +
*Database*: Oracle Database 19c or higher

== Getting Started

This document will guide you through the process of setting up the *BACKEND of Pepper in Elderly Care* project on your local machine. Most of the *screenshots* are from *IntelliJ IDEA*, so it is *recommended* to use *IntelliJ*. ğŸ–¥ï¸ğŸ¤–ğŸ®

* ğŸš€ **Step 1: Setup Oracle Database on Docker**  +
  **â†³** ğŸ“„ *Follow the instructions* in the given PDF.  
  **â†³** ğŸ”— link:docs/DockerOracleWin.pdf[Docker Oracle Database Setup PDF]  +
  **â†³** ğŸ³ *Run the Oracle Database* on Docker.

* ğŸŒ± **Step 2: Clone/Fork the Repository**  +
  **â†³** ğŸŒ [GitHub Repository](https://github.com/KyawIT/PEPPER)

* ğŸ“‚ **Step 3: Open the Project in IntelliJ IDEA**  +
  **â†³** ğŸ—‚ï¸ *Open IntelliJ IDEA* and select *File* > *Open* and navigate to the project folder.

  image::images/Project_Open.png[Open Project in IntelliJ IDEA, align=center]

* âš™ï¸ **Step 4: Configure the Database**  +
  **â†³** ğŸ“„ *Open the* `application.properties` *file in the* `resources` *folder.*  +
  **â†³** âœï¸ *Update the database URL, username, and password* with your Oracle Database settings.  
  

[source,properties]
----
# Application configuration example
quarkus.datasource.db-kind=oracle
quarkus.datasource.username=pepperdb123
quarkus.datasource.password=pepperdb123
quarkus.datasource.jdbc.url=jdbc:oracle:thin:@/localhost:15210/XEPDB1
----


* ğŸ› ï¸ **Step 5: Create the Database Schema**  +
  **â†³** ğŸ“œ *Run the latest SQL script in the* `resources` *folder to create the database schema.*  +
  **â†³** ğŸ“ *Example SQL script: `V1__.sql`.*


image::images/DB_Migration.png[Create Database Schema,align=center]


* ğŸ—ï¸ **Step 6: Build the Project**  +
  **â†³** âŒ¨ï¸ *Press* `Ctrl + F9` *to build the project.*  +
  **â†³** ğŸ” *Or click the* *hamburger icon* *in the top left corner.*

image::images/Build.png[Build Project in IntelliJ IDEA,align=center]

* â–¶ï¸ **Step 7: Run the Project**  +
  **â†³** âŒ¨ï¸ *Press* `Shift + F10` *to run the project.*  +
  **â†³** ğŸŸ¢ *Or click the green play icon* *in the top right corner.*

* ğŸ“œ **Step 8: Access Swagger**  +
  **â†³** ğŸŒ *Open your browser and go to* `http://localhost:8080/swagger-ui/` *to see the Swagger UI.*

image::images/SwaggerUI.png[Swagger UI, align=center]

== Future Steps

* ğŸ”„ *Manage Database Migrations*  +
**â†³** ğŸ” *If you add more models, open the Database GUI in IntelliJ IDEA and right-click to select* *Create Flyway Migration.*  +
  **â†³** ğŸ“ *Ensure you have a* `resources/db/migration` *folder in your project. If not, create it.*

image::images/DB_Migration_Proj-Struct.png[DatabaseSelection, align=center]

**â†³** ğŸ—ƒï¸ *Select the Database icon in the top right corner of IntelliJ IDEA.*

image::images/DB_GUI.png[Database Selection, align=center]

**â†³** ğŸ‘‰ *Right-click on the Database icon and select* *Create Flyway Migration.*

image::images/DB_GUI_Right_Click.png[Database Selection, align=center]

**â†³** âœ… *Ensure your settings match those below and click* *OK.*

image::images/FlyWay_GUI.png[Database Selection, align=center]


**â†³** ğŸ“œ *You will see the SQL script in the* `resources/db/migration` *folder. Update the script with the latest changes.*



== Project Structure

image::images\Proj_Struct.png[Project Structure, align=center]

* ğŸ“‚ **Controller/**  
  **â†³** ğŸŒ *REST controllers* â€“ Define API endpoints.

* âš™ï¸ **Service/**  
  **â†³** ğŸ§  *Business logic* â€“ Handle the application's core logic.

* ğŸ“ **Model/**  
  **â†³** ğŸ—‚ï¸ *Data model* â€“ Represents the structure of data.

* ğŸ“Š **Repository/**  
  **â†³** ğŸ’¾ *Data access* â€“ Interacts with the database.

* ğŸš€ **DTOs/**  
  **â†³** ğŸ”„ *Data Transfer Object* â€“ Transfers data between layers.

* ğŸ§ª **Test/**  
  **â†³** âœ… *Test classes* â€“ Unit and integration tests.

* ğŸ“ **resources/**  
  **â†³** âš™ï¸ *Application properties* â€“ Configuration settings. +  
  **â†³** ğŸ“ *application.properties* â€“ Main configuration file.  +
  **â†³** ğŸ—ƒï¸ *Database configuration* â€“ Database settings.

* ğŸ³ **Dockerfile**  
  **â†³** ğŸ“¦ *Docker configuration* â€“ Container setup.

* ğŸ“œ **pom.xml**  
  **â†³** ğŸ› ï¸ *Maven configuration* â€“ Build setup. +  
  **â†³** ğŸ“š *Dependencies* â€“ Libraries and tools.



== Dependencies

1. *Quarkus RESTEasy* (`quarkus-resteasy`): For building RESTful APIs in Quarkus ğŸŒğŸš€.

2. *Quarkus RESTEasy Jackson* (`quarkus-resteasy-jackson`): Handles JSON serialization/deserialization in REST services ğŸ“„ğŸ”„.

3. *Quarkus ARC* (`quarkus-arc`): Supports dependency injection for better code structure ğŸ§©ğŸ¤–.

4. *Quarkus JUnit 5* (`quarkus-junit5`): Enables testing with JUnit 5 ğŸ“Šâœ….

5. *Rest-Assured* (`rest-assured`): Simplifies REST API testing ğŸ”ğŸ§ª.

6. *Quarkus SmallRye OpenAPI* (`quarkus-smallrye-openapi`): Automatically generates OpenAPI docs ğŸ“œğŸ”.

7. *MicroProfile OpenAPI API* (`microprofile-openapi-api`): Provides annotations for OpenAPI documentation ğŸ“‘âœï¸.

8. *Quarkus JDBC Oracle* (`quarkus-jdbc-oracle`): Connects to Oracle databases using JDBC ğŸ”—ğŸ—„ï¸.

9. *Quarkus Flyway* (`quarkus-flyway`): Manages database migrations and versioning ğŸ“ˆğŸ”§.

10. *Quarkus Hibernate ORM Panache* (`quarkus-hibernate-orm-panache`): Simplifies database interactions with an Active Record pattern ğŸ—ƒï¸ğŸ“.
